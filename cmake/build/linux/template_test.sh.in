#! /bin/bash
# Shell script to ease the launch of a Sight unit test on linux.
#
# This exports the proper LD_LIBRARY_PATH to launch the test

# Don't modify this file, it is automatically generated by CMake.


# Setup the directories
bindir=$(cd "$(dirname "$0")"; pwd)
rootdir=$(cd "$bindir/.." ; pwd)
libdir="$rootdir/lib/sight"
sdkdir="@Sight_LIBRARY_DIR@"
extdir="@FW_SIGHT_EXTERNAL_LIBRARIES_DIRS@"

# compute LD_LIBRARY_PATH
if [ ! -z "${libdir}" -a "${libdir}" != " " ]; then
    LD_LIBRARY_PATH=${libdir}${LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH}
fi

if [ ! -z "${sdkdir}" -a "${sdkdir}" != " " ]; then
    LD_LIBRARY_PATH=${sdkdir}${LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH}
fi

if [ ! -z "${extdir}" -a "${extdir}" != " " ]; then
    LD_LIBRARY_PATH=${extdir}${LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH}
fi

export LD_LIBRARY_PATH

if xprop -root &> /dev/null || ! xvfb-run --help &>/dev/null ; then
    exec "$bindir/@PROJECT_EXECUTABLE@" $@
else
    exec "$bindir/safe-xvfb-run" "$bindir/@PROJECT_EXECUTABLE@" $@
fi
