#! /bin/bash
# Shell script to ease the launch of a Sight application on linux.
#
# This exports the proper LD_LIBRARY_PATH, and append the profile.xml of the application

# Don't modify this file, it is automatically generated by CMake.

me=$(cd "$(dirname "$0")"; pwd)

# Setup the directories
bindir="@LAUNCHER_PATH@"
rootdir=$(cd "$me/.." ; pwd)
libdir="$rootdir/lib/sight"
sdkdir="@Sight_LIBRARY_DIR@"
extdir="@Sight_EXTRA_LIBRARY_DIR@"
moduledir="$rootdir/@SIGHT_MODULE_RC_PREFIX@"
moduleopt="@SIGHT_EXTRA_MODULES@"
sightdepslibs="@SIGHT_EXTERNAL_LIBRARIES_LIB_PATH@"

# compute LD_LIBRARY_PATH
if [ ! -z "${libdir}" -a "${libdir}" != " " ]; then
    LD_LIBRARY_PATH=${libdir}${LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH}
fi

if [ ! -z "${sdkdir}" -a "${sdkdir}" != " " ]; then
    LD_LIBRARY_PATH=${sdkdir}${LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH}
fi

if [ ! -z "${extdir}" -a "${extdir}" != " " ]; then
    LD_LIBRARY_PATH=${extdir}${LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH}
fi

if [ ! -z "${sightdepslibs}" -a "${sightdepslibs}" != " " ]; then
    LD_LIBRARY_PATH=${sightdepslibs}${LD_LIBRARY_PATH:+:$LD_LIBRARY_PATH}
fi

# export LD_LIBRARY_PATH
export LD_LIBRARY_PATH

# Use CMAKE Variable of fwlauncher and Profile.xml path
echo  "$bindir/@LAUNCHER@" \""$moduledir/@PROFILE_PATH@"\" $moduleopt
exec "$bindir/@LAUNCHER@" \""$moduledir/@PROFILE_PATH@"\" $moduleopt $@
